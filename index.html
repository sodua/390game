<html>
<head>
  <meta charset="UTF-8">
  <script language="javascript" type="text/javascript" src="scripts/p5.js"></script>
  <script language="javascript" src="scripts/p5.dom.js"></script>
  <script language="javascript" type="text/javascript" src="sketch.js"></script>
  <script language="javascript" type="text/javascript" src="ship.js"></script>
  <script language="javascript" type="text/javascript" src="level.js"></script>

</head>
<body>
  <script src="scripts/virtualjoystick.js"></script>
  <script>
  var ship;
  var joystick	= new VirtualJoystick({
	container	: document.getElementById('defaultCanvas0'),
	mouseSupport	: true,
  });
  var level = [];
  function setup() {
  createCanvas(900, 720);
  ship = new Ship();
  level.push(new Level());
  }

  function draw() {
  background(0);
  ship.update();
  ship.show();
  
  if (frameCount % 10 == 0) {
      level.push(new Level());
  }

  for (var i = 0; i < level.length; i++) {
      level[i].show();
      level[i].update();
  }
	
	if (keyIsDown(UP_ARROW)) {
		ship.up();
	}
	if (keyIsDown(DOWN_ARROW)) {
		ship.down();
	}
	if (keyIsDown(RIGHT_ARROW)) {
		ship.right();
	}
	if (keyIsDown(LEFT_ARROW)) {
		ship.left();
	}
	joystick.right() ? ship.right() : '';
	joystick.up() ? ship.up() : '';
	joystick.left() ? ship.left() : '';
	joystick.down() ? ship.down() : '';
}
	joystick.addEventListener('touchStart', function(){
		console.log('down')
})
	joystick.addEventListener('touchEnd', function(){
		console.log('up')
})
	
</script>
</body>
</html>
